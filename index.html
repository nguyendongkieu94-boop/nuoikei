<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Dá»° ÃN NUÃ”I KEI ğŸ±</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    body{
      font-family: system-ui, sans-serif;
      background: linear-gradient(135deg,#ffb347,#fff3e0);
      display:flex;
      justify-content:center;
      align-items:center;
      min-height:100vh;
      margin:0;
    }
    .game{
      width:320px;
      background:#fffdf8;
      border-radius:22px;
      padding:20px;
      box-shadow:0 12px 30px rgba(255,152,0,.3);
      text-align:center;
    }
    .pet{
      font-size:80px;
      margin:10px 0;
    }
    .bar{
      background:#eee;
      border-radius:10px;
      overflow:hidden;
      margin-bottom:8px;
    }
    .bar-inner{
      height:10px;
      background:linear-gradient(90deg,#ff9800,#ffd54f);
      width:100%;
      transition: width 0.3s;
    }
    button{
      padding:10px;
      border:none;
      border-radius:14px;
      background:linear-gradient(135deg,#ffb74d,#ff9800);
      margin:4px;
      font-weight:600;
      cursor:pointer;
      box-shadow:0 8px 20px rgba(255,152,0,.35);
      transition:transform .1s,box-shadow .1s;
    }
    button:active{
      transform:translateY(1px);
      box-shadow:0 4px 10px rgba(255,152,0,.35);
    }
    input,textarea{
      width:100%;
      margin-top:6px;
      padding:8px;
      border-radius:10px;
      border:1px solid #ddd;
      font-family:inherit;
      font-size:14px;
    }
    #status{
      font-size:12px;
      margin-top:6px;
      min-height:1.2em;
    }

    /* thÆ¡ dÆ°á»›i tiÃªu Ä‘á» */
    .subtitle-poem{
      font-size:14px;
      color:#ff9800;
      margin-top:-4px;
      margin-bottom:12px;
      line-height:1.4;
      font-style:italic;
    }

    /* donate box */
    .donate-box{
      margin-top:16px;
      padding:10px 12px;
      border-radius:14px;
      background:#fff7e6;
      font-size:13px;
      text-align:left;
    }
    .donate-title{
      font-weight:600;
      margin-bottom:4px;
    }
    .donate-text{
      margin:0 0 8px;
      line-height:1.4;
      color:#333;
    }
    .donate-btn{
      display:inline-block;
      padding:8px 14px;
      border-radius:999px;
      background:linear-gradient(135deg,#ffb74d,#ff9800);
      text-decoration:none;
      color:#fff;
      font-weight:600;
      box-shadow:0 6px 16px rgba(255,152,0,.35);
      font-size:13px;
      border:none;
      cursor:pointer;
    }
    .donate-note{
      margin-top:6px;
      font-size:11px;
      opacity:0.7;
    }

    /* STK ná»•i báº­t */
    .account-block{
      margin-top:4px;
      padding:8px 10px;
      background:#fff;
      border-radius:10px;
      text-align:center;
    }
    .account-bank{
      font-weight:600;
      font-size:12px;
      text-transform:uppercase;
      margin-bottom:4px;
    }
    .account-name{
      font-size:12px;
      margin-bottom:4px;
    }
    .account-number{
      font-size:16px;
      font-weight:700;
      letter-spacing:1px;
    }

    /* ====== ANIMATIONS & EFFECTS ====== */
    @keyframes pop {
      0% { transform: scale(1); }
      40% { transform: scale(1.15); }
      100% { transform: scale(1); }
    }

    @keyframes shake {
      0% { transform: translateX(0); }
      25% { transform: translateX(-3px); }
      50% { transform: translateX(3px); }
      75% { transform: translateX(-3px); }
      100% { transform: translateX(0); }
    }

    @keyframes floatUp {
      from { transform: translateY(0); opacity: 1; }
      to   { transform: translateY(-60px); opacity: 0; }
    }

    button.sending {
      opacity: 0.7;
      pointer-events: none;
    }

    .heart {
      position: fixed;
      font-size: 18px;
      animation: floatUp 1.2s ease-out forwards;
      pointer-events:none;
    }

    .shake {
      animation: shake 0.4s;
    }
  </style>
</head>

<body>
  <div class="game">
    <h2>Dá»° ÃN NUÃ”I KEI ğŸ±</h2>
    <div class="subtitle-poem">
      CÃ³ cÃ¢y, cÃ³ nÃºi, cÃ³ Ä‘áº¡i Ä‘á»‹a, cÃ³ thÃ¡ng nÄƒm.<br>
      CÃ³ Kei Ä‘Ã¢y, báº¡n cÃ²n mong tháº¿ giá»›i nÃ y tá»‘t Ä‘áº¹p Ä‘áº¿n chá»«ng nÃ o ná»¯a Ã¡... ğŸ¾
    </div>

    <div id="pet" class="pet">ğŸ˜º</div>

    ğŸš Bá»¤NG Máº¶P Cá»¦A MÃ’E
    <div class="bar"><div id="hunger" class="bar-inner"></div></div>
    ğŸ˜º Äá»˜ Há»šN Cá»¦A MÃ’E
    <div class="bar"><div id="happy" class="bar-inner"></div></div>
    ğŸ”‹ Äá»˜ Äáº¦Y PIN Cá»¦A MÃ’E
    <div class="bar"><div id="energy" class="bar-inner"></div></div>

    <button onclick="feed()">ğŸš Cho má»™t con cÃ¡ Ä‘á»ƒ nhai nhai nhai</button>
    <button onclick="play()">ğŸˆ Báº¯t cháº¡y bá»™ sá»™c sá»™c</button>
    <button onclick="sleepPet()">ğŸ’¤ Cho Kei ngá»§ thÃªm má»¥t miáº¿ng</button>

    <hr>

    <strong>ğŸ’Œ Gá»­i lá»i nháº¯n cho Kei</strong>
    <input id="guestName" placeholder="Báº¡n lÃ  ai nÃ¨ ğŸ¾">
    <textarea id="guestMsg" rows="3" placeholder="NÃ³i gÃ¬ Ä‘Ã³ dá»‹u dÃ ng cho Kei Ä‘i~"></textarea>
    <button id="sendBtn" onclick="sendMessage()">ğŸ’– Gá»­i</button>
    <div id="status"></div>

    <hr>

    <!-- DONATE NUÃ”I MÃ’E -->
    <div class="donate-box">
      <div class="donate-title">ğŸ¾ á»¦ng há»™ nuÃ´i Kei</div>
      <p class="donate-text">
        Náº¿u báº¡n muá»‘n gÃ³p Ã­t bÃ¡nh thÆ°á»Ÿng / cÃ¡t vá»‡ sinh / cÃ¡ há»™p cho Kei,<br>
        cÃ³ thá»ƒ chuyá»ƒn khoáº£n cho MÃ²e á»Ÿ Ä‘Ã¢y nha:
      </p>

      <!-- BLOCK STK TO RÃ• -->
      <div class="account-block">
        <div class="account-bank">VIETCOMBANK</div>
        <div class="account-name">Chá»§ tÃ i khoáº£n: <strong>MÃ’E KEI</strong></div>
        <div class="account-number" id="accountNumber">1052956151</div>
      </div>

      <button type="button" class="donate-btn" onclick="copyAccount()">
        ğŸ“‹ Copy STK
      </button>
      <div id="donateStatus" class="donate-note"></div>
    </div>
  </div>

  <script>
    // ===== GAME NUÃ”I KEI =====
    let hunger = 100, happy = 100, energy = 100;

    const hungerBar = document.getElementById('hunger');
    const happyBar  = document.getElementById('happy');
    const energyBar = document.getElementById('energy');

    function updateBars(){
      hunger = Math.max(0, Math.min(100, hunger));
      happy  = Math.max(0, Math.min(100, happy));
      energy = Math.max(0, Math.min(100, energy));

      hungerBar.style.width = hunger + '%';
      happyBar.style.width  = happy  + '%';
      energyBar.style.width = energy + '%';
    }

    function feed(){
      hunger += 20;
      happy  += 5;
      updateBars();
    }

    function play(){
      if(energy < 10) return;
      happy  += 15;
      energy -= 15;
      hunger -= 10;
      updateBars();
    }

    function sleepPet(){
      energy += 30;
      hunger -= 5;
      updateBars();
    }

    setInterval(() => {
      hunger--;
      happy--;
      energy--;
      updateBars();
    }, 3000);

    updateBars();

    // ===== Gá»¬I Lá»œI NHáº®N =====
    function sendMessage(){
      const nameInput = document.getElementById("guestName");
      const msgInput  = document.getElementById("guestMsg");
      const status    = document.getElementById("status");
      const btn       = document.getElementById("sendBtn");

      const name = nameInput.value || "áº¨n danh";
      const msg  = msgInput.value.trim();

      if(!msg){
        status.textContent = "ğŸ± Kei Ä‘ang Ä‘á»£i lá»i nháº¯n Ä‘Ã³~";
        btn.classList.add("shake");
        btn.addEventListener("animationend", () => {
          btn.classList.remove("shake");
        }, { once: true });
        return;
      }

      // hiá»‡u á»©ng Ä‘ang gá»­i
      btn.textContent = "ğŸ’Œ Äang gá»­i...";
      btn.classList.add("sending");
      btn.style.animation = "pop 0.4s";

      // trÃ¡i tim bay
      const rect = btn.getBoundingClientRect();
      const heart = document.createElement("div");
      heart.className = "heart";
      heart.textContent = "ğŸ’–";
      heart.style.left = (rect.left + rect.width/2) + "px";
      heart.style.top  = (rect.top - 10) + "px";
      document.body.appendChild(heart);
      setTimeout(() => heart.remove(), 1200);

      fetch("https://script.google.com/macros/s/AKfycbzNIFaa3CkZpt-wqPUJso_5ZVU6RQ96sqTgMlF3Wx_Hn47lbPEK6UvPq0-wxV10_qwF/exec",{
        method:"POST",
        body:new URLSearchParams({name:name,message:msg})
      })
      .then(() => {
        status.textContent = "ğŸ’– Kei nháº­n Ä‘Æ°á»£c rá»“i nÃ¨~";
        msgInput.value = "";
        nameInput.value = "";
      })
      .catch(() => {
        status.textContent = "ğŸ˜¿ Gá»­i chÆ°a Ä‘Æ°á»£c, thá»­ láº¡i nha";
      })
      .finally(() => {
        btn.textContent = "ğŸ’– Gá»­i";
        btn.classList.remove("sending");
        btn.style.animation = "";
      });
    }

    // ===== COPY STK DONATE =====
    function copyAccount(){
      const accEl = document.getElementById("accountNumber");
      const accNumber = accEl.textContent.trim();
      const donateStatus = document.getElementById("donateStatus");

      if (!accNumber) {
        donateStatus.textContent = "KhÃ´ng Ä‘á»c Ä‘Æ°á»£c STK, báº¡n kiá»ƒm tra láº¡i giÃºp mÃ¬nh nha ğŸ˜¿";
        return;
      }

      if (navigator.clipboard && navigator.clipboard.writeText) {
        navigator.clipboard.writeText(accNumber)
          .then(() => {
            donateStatus.textContent = "STK " + accNumber + " Ä‘Ã£ Ä‘Æ°á»£c copy vÃ o clipboard nÃ¨ ğŸ’–";
            setTimeout(() => donateStatus.textContent = "", 2500);
          })
          .catch(() => {
            donateStatus.textContent = "Copy khÃ´ng Ä‘Æ°á»£c, báº¡n copy tay giÃºp mÃ¬nh nha ğŸ˜¿ (STK: " + accNumber + ")";
          });
      } else {
        const temp = document.createElement("textarea");
        temp.value = accNumber;
        document.body.appendChild(temp);
        temp.select();
        try {
          document.execCommand("copy");
          donateStatus.textContent = "STK " + accNumber + " Ä‘Ã£ Ä‘Æ°á»£c copy vÃ o clipboard nÃ¨ ğŸ’–";
          setTimeout(() => donateStatus.textContent = "", 2500);
        } catch (e) {
          donateStatus.textContent = "Copy khÃ´ng Ä‘Æ°á»£c, báº¡n copy tay giÃºp mÃ¬nh nha ğŸ˜¿ (STK: " + accNumber + ")";
        }
        document.body.removeChild(temp);
      }
    }
  </script>
</body>
</html>
